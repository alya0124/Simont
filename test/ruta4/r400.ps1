# URL de mi servidor
$flaskUrl = "http://127.0.0.1:443/local"

# Inicializa el índice de la coordenada
$index = 0

# Lista de coordenadas
$lista_coor = @(

@(20.26622040361047, -98.94661315226018),
@(20.26622934657764, -98.94692027663893),
@(20.26624011164185, -98.94727601634143),
@(20.266164756176718, -98.9476432315182),
@(20.26619705138055, -98.9478268391066),
@(20.2663262321286, -98.94797602027216),
@(20.266476942865417, -98.94799897122071),
@(20.266799893951408, -98.94820552975764),
@(20.26691830918117, -98.94822848070619),
@(20.267359674241487, -98.94853831851161),
@(20.267725683339233, -98.94872192609999),
@(20.268328519971064, -98.94896291105975),
@(20.268716056568948, -98.94916946959668),
@(20.268942119137357, -98.94928422433942),
@(20.2690712976, -98.9496973414133),
@(20.268576112908487, -98.95073013400905),
@(20.268522288390326, -98.9509825944431),
@(20.268479228762367, -98.95110882466011),
@(20.26786562776542, -98.95198096070494),
@(20.2678763927161, -98.95227932303608),
@(20.26785486281399, -98.95235965135599),
@(20.267790273089716, -98.95260063631575),
@(20.26760726872494, -98.95283014580124),
@(20.267542678897616, -98.95286457222407),
@(20.26733814426699, -98.95354162520626),
@(20.267187434366658, -98.9537367082689),
@(20.267036724319915, -98.95411539891995),
@(20.26608406260409, -98.95607162626828),
@(20.265931861180082, -98.95601754450466),
@(20.26509475067963, -98.95766703829507),
@(20.264866446989355, -98.95872163246892),
@(20.263902494552585, -98.96010071744124),
@(20.263750290988916, -98.96085786213192),
@(20.263471250734483, -98.96226398798603),
@(20.26329367940226, -98.96326450061302),
@(20.26288780130853, -98.9645624629399),
@(20.262659494414354, -98.96499511704886),
@(20.262380452198705, -98.96610379320308),
@(20.262050674350007, -98.96656348803569),
@(20.261644793005622, -98.96788849124437),
@(20.26134038130079, -98.96864563593506),
@(20.26065545278203, -98.96972727120746),
@(20.260553981633315, -98.97048441589816),
@(20.259995889129637, -98.97180941910685),
@(20.260021256984242, -98.97189054159355),
@(20.259945153317975, -98.97253952275699),
@(20.259260218642588, -98.97375636243844),
@(20.258930434202487, -98.97464871153818),
@(20.258448440298974, -98.97591963298326),
@(20.25791570845395, -98.97692014561022),
@(20.2577127625083, -98.97767729030092),
@(20.257180028138706, -98.97889412998235),
@(20.256520449719737, -98.97997576525478),
@(20.256647291877556, -98.98008392859015),
@(20.25624139640469, -98.9810574003353),
@(20.255936974103644, -98.9818686267896),
@(20.2554803395329, -98.98270689412571),
@(20.254820753893096, -98.98395077468899),
@(20.254313378417326, -98.98535690054311),
@(20.25436411603215, -98.9878176206169),
@(20.25436411603215, -98.98922374647101),
@(20.254262640771195, -98.98979160498904),
@(20.25428800959265, -98.99179263024297),
@(20.254440222432866, -98.99327987859046),
@(20.254490960013605, -98.99509161767172),
@(20.254465591225316, -98.9974171335074),
@(20.254288009591175, -98.99895846377056),
@(20.253806001274764, -98.99890438200694),
@(20.25345083629472, -98.99890438200694),
@(20.25289780695323, -98.9987263838724),
@(20.252288948643308, -98.99856413858154),
@(20.251375656702386, -98.99799628006353),
@(20.250893639345886, -98.99772587124542),
@(20.24975201332333, -98.99677944038207),
@(20.24861037890897, -98.99607637745501),
@(20.24899092456066, -98.99629270457845),
@(20.246809116349784, -98.99521106930607),
@(20.245718200751906, -98.99448096549719),
@(20.24429746197621, -98.99383198433374),
@(20.24300356357226, -98.99321004405212),
@(20.24323189932835, -98.99331820761853),
@(20.24249614945252, -98.99307483968224),
@(20.241836508670687, -98.99296667615499),
@(20.24061870294672, -98.99261514469147),
@(20.24049184761764, -98.99258810378808),
@(20.23947700139496, -98.99212840879733),
@(20.239045689743335, -98.99174983645197),
@(20.238456185758036, -98.99288968273888),
@(20.238022782825603, -98.99343558920403),
@(20.2377469803302, -98.99381352444912),
@(20.237037771665914, -98.99393950286417),
@(20.236289159009218, -98.99402348847418),
@(20.234949527360904, -98.99402348847418),
@(20.233255270800196, -98.99435943091427),
@(20.232664246725207, -98.99431743810926),
@(20.23207322040316, -98.99448540932931),
@(20.231245779777318, -98.99448540932931),
@(20.232033818568468, -98.99305765395893),
@(20.232112622227874, -98.99209181944367),
@(20.23364928560178, -98.99188185541861),
@(20.236289159009218, -98.9914199345635),
@(20.23707717223216, -98.9915039201735),
@(20.238574386348006, -98.99129395614845),
@(20.239125987912498, -98.99175587700357),
@(20.23967758751903, -98.99234377627374),
@(20.240504983257534, -98.99255374029879),
@(20.241095977516274, -98.99267971871382),
@(20.241608170722262, -98.99276370432383),
@(20.24271135035435, -98.99322562517898),
@(20.244090313879248, -98.99377153164411),
@(20.24503588195097, -98.99427544525079),
@(20.247517970342734, -98.99545124379111),
@(20.24948785353464, -98.99666903513642),
@(20.250472785761488, -98.99717294879656),
@(20.251457711741953, -98.99813878331183),
@(20.251891077194426, -98.9984327329469),
@(20.252915390729093, -98.99885266099702),
@(20.253979093786576, -98.99889465380201),
@(20.254451848362027, -98.99902063221704),
@(20.254412452202377, -98.99822276892185),
@(20.254412452202377, -98.99608113586628),
@(20.254333659853113, -98.9924697546353),
@(20.254373056032737, -98.99154591292505),
@(20.254294263663475, -98.98957225108954),
@(20.254294263704885, -98.98831246713641),
@(20.254215471295637, -98.9855829348107),
@(20.25531856138665, -98.98348329456014),
@(20.255791311883726, -98.98192956077473),
@(20.256382247980795, -98.98062778381937),
@(20.25705197294498, -98.97957796389024),
@(20.258036857193016, -98.97710038839459),
@(20.25831262366277, -98.9756726330242),
@(20.25941568464301, -98.97311107191851),
@(20.25996721227506, -98.97193527359647),
@(20.26067631624656, -98.97008759017599),
@(20.26170057181964, -98.96769400029036),
@(20.262646032503188, -98.96509044637965),
@(20.263197548637585, -98.963746676784),
@(20.26359148748928, -98.96126910128835),
@(20.26422178757209, -98.95937942506283),
@(20.264773298130457, -98.95879152599102),
@(20.265482380143606, -98.95711181379059),
@(20.266230852086835, -98.95585202964023),
@(20.266742962388893, -98.95488619512498),
@(20.26737324967122, -98.95329046853456),
@(20.267964141673126, -98.95219865560426),
@(20.26843685365445, -98.95131680669903),
@(20.26859442399483, -98.95110684267397),
@(20.269185311346043, -98.94925915925349),
@(20.268318675794134, -98.94888122400839),
@(20.26780657067273, -98.9488392313409),
@(20.26674296236897, -98.94833531768076),
@(20.266033886116084, -98.94778941121561),
@(20.265324806623, -98.9473274903605),
@(20.266877841827625, -98.94839139804887),
@(20.266412164806837, -98.94808114218907),
@(20.266237535563736, -98.94791567239716),
@(20.266179325772363, -98.9475226816414),
@(20.266256938822675, -98.94729516067756),
@(20.266256938822675, -98.94684011874982),
@(20.266159922503718, -98.946550546614)


)


# Índice inicial
$index = 0

# URL del servidor Flask
$flaskUrl = "http://127.0.0.1:443/local"  # Cambia esto a la URL de tu servidor Flask

$fingerprint = "huella_digital_encriptada"

$i = 0

$id = "400"

while ($true) {

     # Obtiene las coordenadas actuales
     $coords = $lista_coor[$index]
     $lat = $coords[0]
     $lon = $coords[1]
 
     # Crea los datos de la solicitud
     if ($i -eq 0) {
        $postData = "id=$id&lat=$lat&lon=$lon&fingerprint=$fingerprint"
    } else {
        $postData = "id=$id&lat=$lat&lon=$lon"
    }
 
     # Envía la solicitud POST usando curl
     $response = curl.exe -X POST -d $postData -H "Content-Type: application/x-www-form-urlencoded" $flaskUrl
 
     # Muestra la respuesta del servidor para depuración
     Write-Output $response
 
     # Incrementa el índice y reinicia si es necesario
     $index = ($index + 1) % $lista_coor.Length
 
     $i++
     # Espera 1 segundo antes de enviar la siguiente solicitud
     Start-Sleep -Seconds 1
}

