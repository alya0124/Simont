# URL de mi servidor
$flaskUrl = "http://127.0.0.1:443/local"

# Inicializa el índice de la coordenada
$index = 0

# Lista de coordenadas
$lista_coor = @(

@(20.266198729038578, -98.946550546614),
@(20.266218132302367, -98.9470676397137),
@(20.266179325772363, -98.94739857929748),
@(20.266179325772363, -98.94768815143331),
@(20.266198729038578, -98.94791567239716),
@(20.266450971278612, -98.94801909101709),
@(20.26647037451086, -98.94803977474108),
@(20.266664406699906, -98.94808114218907),
@(20.267149486111016, -98.94843276549683),
@(20.26736292057149, -98.9484741329448),
@(20.267809191676484, -98.94872233763266),
@(20.268197252463573, -98.94892917487253),
@(20.268701730035744, -98.94919806328437),
@(20.269245011740587, -98.9494462679722),
@(20.269147997270018, -98.94967378883061),
@(20.268740535914954, -98.95048045406611),
@(20.268507700374474, -98.95101823088976),
@(20.26829426748874, -98.9514732728175),
@(20.26815844640859, -98.9517835286773),
@(20.267886803891606, -98.95223857060502),
@(20.267556951624485, -98.95283839860065),
@(20.267207695518493, -98.95374848245608),
@(20.26697485767777, -98.95412078948783),
@(20.26666440662925, -98.95451378008649),
@(20.266489777670017, -98.95507224063412),
@(20.266315148514266, -98.95554796628583),
@(20.26604350277024, -98.95612711055747),
@(20.265752453231087, -98.95664420365716),
@(20.265441999787605, -98.95734745027272),
@(20.26517035251507, -98.95796796199232),
@(20.26503452870047, -98.9583609527481),
@(20.264433021806884, -98.95956060873932),
@(20.264161372768122, -98.95995359949508),
@(20.26394793390409, -98.96032590652686),
@(20.26388972323098, -98.96059479482766),
@(20.263637476827693, -98.9613187251672),
@(20.263579266061022, -98.96173239964693),
@(20.26355986246727, -98.96191855316283),
@(20.263482248068037, -98.96268385095036),
@(20.263424037243137, -98.96293205563819),
@(20.263191193725202, -98.96359393480579),
@(20.2630165608575, -98.96409034418149),
@(20.26286133147679, -98.96450401866122),
@(20.26255087224961, -98.9653313676207),
@(20.26231802738715, -98.96599324662189),
@(20.262065778429356, -98.96651033972155),
@(20.261755317610792, -98.96717221888915),
@(20.261212009684034, -98.96845460977636),
@(20.260804527490894, -98.96984041928347),
@(20.260455256188212, -98.97075050313893),
@(20.259853731494925, -98.97217767994943),
@(20.259349225159617, -98.97360485690454),
@(20.258883525548594, -98.97465972682788),
@(20.258670079426626, -98.97528023854748),
@(20.258437228777034, -98.97588006654311),
@(20.25808795214776, -98.97645921081475),
@(20.25783569631566, -98.97726587605025),
@(20.25752522703654, -98.97780365287393),
@(20.25680726441139, -98.97970655532214),
@(20.25628334367202, -98.98069937407351),
@(20.256128107557856, -98.98109236482927),
@(20.255817634863877, -98.98175424399686),
@(20.255410138510822, -98.98289184881615),
@(20.25513847368128, -98.98357441170772),
@(20.25482799900835, -98.98413287225537),
@(20.2544399047512, -98.9850429559403),
@(20.254207047757053, -98.98659423523932),
@(20.254401095276428, -98.98758705399071),
@(20.254401095276428, -98.98880739370595),
@(20.2544399047512, -98.9905034590729),
@(20.254362285791956, -98.99135149175636),
@(20.25426526205919, -98.99131012412757),
@(20.25440109529729, -98.99242704522287),
@(20.254342881066947, -98.9933371290783),
@(20.254362285812807, -98.99461951996551),
@(20.254362285812807, -98.99583985968077),
@(20.254342881066947, -98.99668789236422),
@(20.254459309505815, -98.99799096697542),
@(20.22901738769133, -98.99845493613047),
@(20.227607992892143, -98.99828327474923),
@(20.22704423139547, -98.99798286733206),
@(20.226520736746988, -98.99751079853363),
@(20.22595697130849, -98.99716747577115),
@(20.225071050061512, -98.99626625351964),
@(20.223983776178912, -98.99536503126812),
@(20.223782428329443, -98.99523628523217),
@(20.223178383217043, -98.9941204862541),
@(20.222534065844716, -98.99257553382293),
@(20.222050826063857, -98.99184597295265),
@(20.219835957858646, -98.99090183535583),
@(20.219830463254056, -98.99090183549308),
@(20.218474185886663, -98.99090183549308),
@(20.21697878944274, -98.9907165351073),
@(20.215657264342774, -98.9907165351073),
@(20.214092285892388, -98.99079065526162),
@(20.212875069549302, -98.99064241495299),
@(20.210405830006962, -98.99056829479866),
@(20.209432034627305, -98.99038299441288),
@(20.208006108891105, -98.98979003323203),
@(20.207762656863988, -98.98930825222897),
@(20.20751920445611, -98.98860411076295),
@(20.2067540658383, -98.98778878906549),
@(20.20644105350159, -98.98712170767664),
@(20.20602370274029, -98.98682522705937),
@(20.205049879946056, -98.98526870381872),
@(20.20452818665769, -98.98463868250704),
@(20.204145610468498, -98.98408278134967),
@(20.203763033339207, -98.98389748096389),
@(20.204076051036886, -98.98293391894693),
@(20.20567590956102, -98.98300803910124),
@(20.207832214601392, -98.98319333948703),
@(20.209188584725982, -98.98326745964134),
@(20.21061449954834, -98.98337863987283),
@(20.212562069417697, -98.98341569994997),
@(20.21381406574894, -98.98356394025863),
@(20.213883620806172, -98.98508340340724),
@(20.21416184072082, -98.98619520572198),
@(20.21402273082567, -98.98697346734231),
@(20.21367495554375, -98.98730700803674),
@(20.213883620806172, -98.98834469019717),
@(20.214335727914854, -98.98967885297485),
@(20.21454439229121, -98.99071653513528),
@(20.21402273082567, -98.99064241498097),
@(20.213188068843284, -98.9906053549038),
@(20.212075179236127, -98.99064241498097),
@(20.210649277796286, -98.99045711459519),
@(20.20967548393982, -98.99038299444085),
@(20.209084248983025, -98.99038299444085),
@(20.208319118058142, -98.99038299444085),
@(20.208840798730886, -98.99067947484062),
@(20.20915380624205, -98.99108713568936),
@(20.209640705563835, -98.99231011823558),
@(20.209988489861125, -98.99305131977874),
@(20.214753056557075, -98.99064241490679),
@(20.216074589336937, -98.99064241490679),
@(20.218195973748852, -98.99082771529257),
@(20.2192740432662, -98.99082771529257),
@(20.2200043441784, -98.99086477536974),
@(20.22146493571704, -98.9912353761413),
@(20.222021347933754, -98.99182833737585),
@(20.222334328930962, -98.99219893814742),
@(20.2227168604056, -98.99305131992206),
@(20.222890738037606, -98.99349604084797),
@(20.222786411650848, -98.99297719964558),
@(20.22320371745447, -98.99416312211466),
@(20.223725348134483, -98.9950896240436),
@(20.224594728713306, -98.99590494574107),
@(20.224768604245874, -98.9960531860497),
@(20.2257770785012, -98.99679438759286),
@(20.226368250024144, -98.99735028875025),
@(20.22765490968762, -98.99820267052489),
@(20.22855904254135, -98.99838797091067),
@(20.229428396096576, -98.99842503098783),
@(20.23078421493617, -98.99827825797247),
@(20.231298094201815, -98.99840464270387),
@(20.232721135610884, -98.99823612972868),
@(20.23533001102689, -98.99827825797247),
@(20.23841317097191, -98.99832038621629),
@(20.240310469766467, -98.99840464270387),
@(20.241965112637892, -98.99861163690461),
@(20.246147600242477, -98.99932657707943),
@(20.24906738333266, -98.99894807933981),
@(20.25017215181041, -98.99873780281781),
@(20.251987111534476, -98.9985275262958),
@(20.252934038622097, -98.99873780281781),
@(20.253084812610176, -98.99885946059217),
@(20.254389996668372, -98.99875244490076),
@(20.254289598284167, -98.99568466174662),
@(20.25442346278201, -98.99022686148403),
@(20.25422266598679, -98.98840759502303),
@(20.25455732715929, -98.98484040530893),
@(20.254958919614143, -98.9836989046004),
@(20.255862498839747, -98.98216501302336),
@(20.256665675958956, -98.98002469919489),
@(20.257234590663497, -98.9782767764293),
@(20.258429823778073, -98.97549426658829),
@(20.260375492199483, -98.97113359905045),
@(20.26187214371845, -98.96677293179292),
@(20.263518443612575, -98.9620400121482),
@(20.26516472604295, -98.95751980799314),
@(20.266561558161904, -98.95475450695706),
@(20.26890621218349, -98.95055337603647),
@(20.269055869747856, -98.94933026197097),
@(20.268720415007934, -98.94923339710341),
@(20.26733657127104, -98.94856538940952),
@(20.26702324644721, -98.94837055383213),
@(20.266501037001472, -98.94806438363909),
@(20.266175088614528, -98.94760379106107),
@(20.266168488738256, -98.9471464890916),
@(20.26619488824745, -98.94687210789914),
@(20.266201488124043, -98.94659772670668),
@(20.266241087377708, -98.94656254963074)

)


# Índice inicial
$index = 0

# URL del servidor Flask
$flaskUrl = "http://127.0.0.1:443/local"  # Cambia esto a la URL de tu servidor Flask

$fingerprint = "huella_digital_encriptada"

$i = 0

$id = "250"

while ($true) {

     # Obtiene las coordenadas actuales
     $coords = $lista_coor[$index]
     $lat = $coords[0]
     $lon = $coords[1]
 
     # Crea los datos de la solicitud
     if ($i -eq 0) {
        $postData = "id=$id&lat=$lat&lon=$lon&fingerprint=$fingerprint"
    } else {
        $postData = "id=$id&lat=$lat&lon=$lon"
    }
 
     # Envía la solicitud POST usando curl
     $response = curl.exe -X POST -d $postData -H "Content-Type: application/x-www-form-urlencoded" $flaskUrl
 
     # Muestra la respuesta del servidor para depuración
     Write-Output $response
 
     # Incrementa el índice y reinicia si es necesario
     $index = ($index + 1) % $lista_coor.Length
 
     $i++
     # Espera 1 segundo antes de enviar la siguiente solicitud
     Start-Sleep -Seconds 1
}

