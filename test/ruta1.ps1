# URL de mi servidor
$flaskUrl = "http://127.0.0.1:443/local"

# Inicializa el índice de la coordenada
$index = 0

# Lista de coordenadas
$lista_coor = @(
    @(20.25635045930053, -98.98130268674305),
    @(20.25626011545414, -98.98160363691864),
    @(20.256558229436536, -98.98175327718462),
    @(20.256575331952874, -98.9822552492747),
    @(20.256571425132423, -98.9826538870433),
    @(20.25639238032246, -98.98297578047948),
    @(20.256361387593093, -98.98343628358994),
    @(20.25629965989746, -98.98374178843738),
    @(20.25628939442321, -98.98414370510833),
    @(20.256368152040584, -98.98448616054893),
    @(20.25642506388322, -98.98492606181615),
    @(20.256515741914288, -98.98538358715194),
    @(20.25631878597963, -98.9862709319595),
    @(20.256140155932776, -98.98670147330547),
    @(20.256151414304016, -98.98724973250136),
    @(20.25607448227089, -98.98775257997454),
    @(20.255820549214847, -98.98786567479896),
    @(20.255790977314686, -98.98779736359869),
    @(20.255820549214847, -98.98786567479896),
    @(20.255790977314686, -98.98779736359869),
    @(20.255866520354816, -98.98788736395525),
    @(20.25630770614699, -98.98851791871098),
    @(20.256279244115743, -98.9888260744212),
    @(20.256077213159847, -98.98891276682526),
    @(20.2560400586457, -98.98919493864552),
    @(20.256262806608766, -98.98956594677346),
    @(20.256065713529533, -98.98970863405375),
    @(20.256072517908075, -98.99012623159827),
    @(20.256152805445773, -98.99064424389165),
    @(20.256305144296405, -98.99076221048853),
    @(20.25618150181209, -98.99087259479588),
    @(20.256297326576406, -98.99113950933566),
    @(20.25624773409393, -98.9911950584818),
    @(20.25632231617917, -98.9912486705176),
    @(20.25647823875536, -98.99114958135839),
    @(20.25649817117446, -98.99147781807643),
    @(20.25641717616113, -98.99182164873269),
    @(20.25621611476231, -98.99222244299003),
    @(20.256154338761715, -98.99235822039747),
    @(20.256120786831755, -98.99249786899135),
    @(20.256062106158774, -98.9925038182835),
    @(20.256118794162558, -98.9926854875153),
    @(20.256126043825073, -98.99271250363672),
    @(20.256146511320348, -98.99264561686564),
    @(20.256084470932513, -98.99258501555038),
    @(20.256087751585604, -98.99262373582935),
    @(20.256109162671284, -98.99258727477343),
    @(20.256112443323946, -98.99253113136235),
    @(20.256089278248097, -98.99248091967958),
    @(20.25603853943632, -98.99230401432649),
    @(20.256048859453048, -98.99222457315725),
    @(20.256028824060748, -98.9922851752174),
    @(20.256070660739317, -98.9923204102071),
    @(20.256053529266383, -98.99227001333378),
    @(20.256060056933465, -98.99234057560135),
    @(20.256092090287156, -98.99242934335357),
    @(20.25608330793355, -98.99247158004637),
    @(20.25610495118109, -98.99255641524464),
    @(20.256073059079043, -98.99261259872185),
    @(20.25609556867461, -98.9927038461511),
    @(20.25608960314538, -98.9927330501557),
    @(20.2561138371087, -98.99280518554469),
    @(20.256104472152727, -98.99288070967125),
    @(20.256066146132145, -98.99294752845909),
    @(20.25609015831789, -98.99301268694282),
    @(20.256065251688716, -98.99313487071293),
    @(20.256029785975023, -98.99318604282926),
    @(20.256036724176326, -98.99323665210727),
    @(20.256058645573782, -98.99328363984976),
    @(20.25606368434454, -98.99337725235495),
    @(20.25605696348759, -98.99350955636829),
    @(20.25609562151269, -98.99357837065345),
    @(20.25608970193562, -98.99373642895343),
    @(20.256114564782956, -98.99374513383603),
    @(20.25611527284698, -98.99381618667888),
    @(20.25611821043074, -98.9938777795533),
    @(20.256105591818055, -98.99392686938254),
    @(20.256095207042235, -98.9939600507926),
    @(20.256081911798253, -98.99402951185585),
    @(20.256060099759868, -98.99411188312715),
    @(20.25606045701676, -98.99413144013308),
    @(20.256044509195414, -98.99415528455316),
    @(20.256038501726072, -98.99415528455316),
    @(20.25601866694623, -98.99418501710403),
    @(20.25598259650128, -98.99421276840005),
    @(20.25597065555976, -98.99427045773193),
    @(20.255972132847084, -98.9942732291751),
    @(20.255974428455222, -98.99430766407652),
    @(20.255977674418433, -98.99431374707866),
    @(20.25598013542607, -98.99437512750972),
    @(20.255966761146575, -98.9944108732054),
    @(20.255949588821296, -98.99441863025143),
    @(20.255964239348788, -98.99440794841425),
    @(20.25595550783902, -98.99442094279159),
    @(20.25592463223862, -98.99441777729962),
    @(20.255913875840057, -98.99443010796433),
    @(20.255905115382314, -98.99445145777423)
)


# Índice inicial
$index = 0

# URL del servidor Flask
$flaskUrl = "http://127.0.0.1:443/local"  # Cambia esto a la URL de tu servidor Flask

while ($true) {
     # Obtiene las coordenadas actuales
     $coords = $lista_coor[$index]
     $lat = $coords[0]
     $lon = $coords[1]
 
     # Crea los datos de la solicitud
     $postData = "id=160&lat=$lat&lon=$lon"
 
     # Envía la solicitud POST usando curl
     $response = curl.exe -X POST -d $postData -H "Content-Type: application/x-www-form-urlencoded" $flaskUrl
 
     # Muestra la respuesta del servidor para depuración
     Write-Output $response
 
     # Incrementa el índice y reinicia si es necesario
     $index = ($index + 1) % $lista_coor.Length
 
     # Espera 1 segundo antes de enviar la siguiente solicitud
     Start-Sleep -Seconds 1
}

